<?php

namespace App\Http\Controllers\Api;

use App\Http\Controllers\Controller;
use App\Models\User;
use Illuminate\Http\Request;
use App\Services\ModuleService;

class ModuleController extends Controller
{
    #====================================================================================================================================================
    #==========================================================Dynamic Api Start=========================================================================
    #====================================================================================================================================================


    #Declare ModuleService Variable
    protected $moduleService;

    public function __construct(ModuleService $moduleService)
    {
        #Use Services in api controller
        $this->moduleService = $moduleService;
    }

    #----------------------------------------------------------------------------------------------------------------------------------------------------
    #Dynamic Module Data Get Api (Single Or Multiple)
    public function read(Request $request, $slug, $id = 0)
    {
        return $this->moduleService->readModuleData($request, $slug, $id);
    }
    #----------------------------------------------------------------------------------------------------------------------------------------------------


    #----------------------------------------------------------------------------------------------------------------------------------------------------
    #Dynamic Module Store Data(Insert Or Update)
    public function store(Request $request, $slug, $id = 0)
    {
      return $this->moduleService->storeModuleData($request, $slug, $id);
    }
    #----------------------------------------------------------------------------------------------------------------------------------------------------

    #----------------------------------------------------------------------------------------------------------------------------------------------------
    #Dynamic Module Record Delete Api
    public function delete($slug, $id)
    {
        return $this->moduleService->deleteModuleData($slug, $id);
    }
    #----------------------------------------------------------------------------------------------------------------------------------------------------

    #----------------------------------------------------------------------------------------------------------------------------------------------------
    #API to Retrieve Field Names and Types
    public function validation_info($slug)
    {

        return $this->moduleService->getValidationInfo($slug);
    }
    #----------------------------------------------------------------------------------------------------------------------------------------------------

    #----------------------------------------------------------------------------------------------------------------------------------------------------
    #Fetch  Data from Relational Tables

    public function relational_data($slug,$field_name)
    {
        return $this->moduleService->getRelationalData($slug,$field_name);
    }
    #----------------------------------------------------------------------------------------------------------------------------------------------------

    #----------------------------------------------------------------------------------------------------------------------------------------------------
    #Api to Fetch Data Tables(for checkbox, select, radio,badge,multiple_select)
    public function fetch_data($slug, $field_name)
    {
        return $this->moduleService->fetch_data($slug, $field_name);
    }
    #----------------------------------------------------------------------------------------------------------------------------------------------------

    #====================================================================================================================================================
    #==========================================================Dynamic Api End===========================================================================
    #====================================================================================================================================================
}
